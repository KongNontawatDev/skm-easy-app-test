import{r as C,j as d,u as re}from"./index-DvfI50mZ.js";import{P as ne,M as V}from"./mobile-button-DZJkoi57.js";import{s as D}from"./toast-BrpPLZSF.js";import{M as H}from"./mobile-input-jpi_8qGO.js";import{C as ae}from"./credit-card-DfOMiA1p.js";import{S as se}from"./shield-_p-c2jb3.js";import{A as ie}from"./auth-layout-oHUCJeen.js";function w(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,r){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},q(e,r)}function oe(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,q(e,r)}var ce=Object.defineProperty,le=Object.defineProperties,he=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,B=(e,r,n)=>r in e?ce(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,b=(e,r)=>{for(var n in r||(r={}))J.call(r,n)&&B(e,n,r[n]);if(M)for(var n of M(r))X.call(r,n)&&B(e,n,r[n]);return e},Y=(e,r)=>le(e,he(r)),de=(e,r)=>{var n={};for(var a in e)J.call(e,a)&&r.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&M)for(var a of M(e))r.indexOf(a)<0&&X.call(e,a)&&(n[a]=e[a]);return n},m=(e,r,n)=>(B(e,typeof r!="symbol"?r+"":r,n),n),I=(e,r,n)=>new Promise((a,t)=>{var s=l=>{try{o(n.next(l))}catch(c){t(c)}},i=l=>{try{o(n.throw(l))}catch(c){t(c)}},o=l=>l.done?a(l.value):Promise.resolve(l.value).then(s,i);o((n=n.apply(e,r)).next())}),ue="hCaptcha-script",L="hCaptchaOnLoad",z="script-error",O="@hCaptcha/loader";function pe(e){return Object.entries(e).filter(([,r])=>r||r===!1).map(([r,n])=>`${encodeURIComponent(r)}=${encodeURIComponent(String(n))}`).join("&")}function Q(e){let r=e&&e.ownerDocument||document,n=r.defaultView||r.parentWindow||window;return{document:r,window:n}}function Z(e){return e||document.head}function fe(e){var r;e.setTag("source",O),e.setTag("url",document.URL),e.setContext("os",{UA:navigator.userAgent}),e.setContext("browser",b({},me())),e.setContext("device",Y(b({},ve()),{screen_width_pixels:screen.width,screen_height_pixels:screen.height,language:navigator.language,orientation:((r=screen.orientation)==null?void 0:r.type)||"Unknown",processor_count:navigator.hardwareConcurrency,platform:navigator.platform}))}function me(){var e,r,n,a,t,s;let i=navigator.userAgent,o,l;return i.indexOf("Firefox")!==-1?(o="Firefox",l=(e=i.match(/Firefox\/([\d.]+)/))==null?void 0:e[1]):i.indexOf("Edg")!==-1?(o="Microsoft Edge",l=(r=i.match(/Edg\/([\d.]+)/))==null?void 0:r[1]):i.indexOf("Chrome")!==-1&&i.indexOf("Safari")!==-1?(o="Chrome",l=(n=i.match(/Chrome\/([\d.]+)/))==null?void 0:n[1]):i.indexOf("Safari")!==-1&&i.indexOf("Chrome")===-1?(o="Safari",l=(a=i.match(/Version\/([\d.]+)/))==null?void 0:a[1]):i.indexOf("Opera")!==-1||i.indexOf("OPR")!==-1?(o="Opera",l=(t=i.match(/(Opera|OPR)\/([\d.]+)/))==null?void 0:t[2]):i.indexOf("MSIE")!==-1||i.indexOf("Trident")!==-1?(o="Internet Explorer",l=(s=i.match(/(MSIE |rv:)([\d.]+)/))==null?void 0:s[2]):(o="Unknown",l="Unknown"),{name:o,version:l}}function ve(){let e=navigator.userAgent,r;e.indexOf("Win")!==-1?r="Windows":e.indexOf("Mac")!==-1?r="Mac":e.indexOf("Linux")!==-1?r="Linux":e.indexOf("Android")!==-1?r="Android":e.indexOf("like Mac")!==-1||e.indexOf("iPhone")!==-1||e.indexOf("iPad")!==-1?r="iOS":r="Unknown";let n;return/Mobile|iPhone|iPod|Android/i.test(e)?n="Mobile":/Tablet|iPad/i.test(e)?n="Tablet":n="Desktop",{model:r,family:r,device:n}}var xe=class ee{constructor(r){m(this,"_parent"),m(this,"breadcrumbs",[]),m(this,"context",{}),m(this,"extra",{}),m(this,"tags",{}),m(this,"request"),m(this,"user"),this._parent=r}get parent(){return this._parent}child(){return new ee(this)}setRequest(r){return this.request=r,this}removeRequest(){return this.request=void 0,this}addBreadcrumb(r){return typeof r.timestamp>"u"&&(r.timestamp=new Date().toISOString()),this.breadcrumbs.push(r),this}setExtra(r,n){return this.extra[r]=n,this}removeExtra(r){return delete this.extra[r],this}setContext(r,n){return typeof n.type>"u"&&(n.type=r),this.context[r]=n,this}removeContext(r){return delete this.context[r],this}setTags(r){return this.tags=b(b({},this.tags),r),this}setTag(r,n){return this.tags[r]=n,this}removeTag(r){return delete this.tags[r],this}setUser(r){return this.user=r,this}removeUser(){return this.user=void 0,this}toBody(){let r=[],n=this;for(;n;)r.push(n),n=n.parent;return r.reverse().reduce((a,t)=>{var s;return a.breadcrumbs=[...(s=a.breadcrumbs)!=null?s:[],...t.breadcrumbs],a.extra=b(b({},a.extra),t.extra),a.contexts=b(b({},a.contexts),t.context),a.tags=b(b({},a.tags),t.tags),t.user&&(a.user=t.user),t.request&&(a.request=t.request),a},{breadcrumbs:[],extra:{},contexts:{},tags:{},request:void 0,user:void 0})}clear(){this.breadcrumbs=[],this.context={},this.tags={},this.user=void 0}},ye=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ge=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,be=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,we=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,P="?",F="An unknown error occurred",Ce="0.0.4";function Ee(e){for(let r=0;r<e.length;r++)e[r]=Math.floor(Math.random()*256);return e}function x(e){return(e+256).toString(16).substring(1)}function je(){let e=Ee(new Array(16));return e[6]=e[6]&15|64,e[8]=e[8]&63|128,x(e[0])+x(e[1])+x(e[2])+x(e[3])+"-"+x(e[4])+x(e[5])+"-"+x(e[6])+x(e[7])+"-"+x(e[8])+x(e[9])+"-"+x(e[10])+x(e[11])+x(e[12])+x(e[13])+x(e[14])+x(e[15])}var Re=[[ye,"chrome"],[be,"winjs"],[ge,"gecko"]];function Oe(e){var r,n,a,t;if(!e.stack)return null;let s=[],i=(a=(n=(r=e.stack).split)==null?void 0:n.call(r,`
`))!=null?a:[];for(let o=0;o<i.length;++o){let l=null,c=null,u=null;for(let[v,g]of Re)if(c=v.exec(i[o]),c){u=g;break}if(!(!c||!u)){if(u==="chrome")l={filename:(t=c[2])!=null&&t.startsWith("address at ")?c[2].substring(11):c[2],function:c[1]||P,lineno:c[3]?+c[3]:null,colno:c[4]?+c[4]:null};else if(u==="winjs")l={filename:c[2],function:c[1]||P,lineno:+c[3],colno:c[4]?+c[4]:null};else if(u==="gecko")o===0&&!c[5]&&e.columnNumber!==void 0&&s.length>0&&(s[0].column=e.columnNumber+1),l={filename:c[3],function:c[1]||P,lineno:c[4]?+c[4]:null,colno:c[5]?+c[5]:null};else continue;!l.function&&l.lineno&&(l.function=P),s.push(l)}}return s.length?s.reverse():null}function _e(e){let r=Oe(e);return{type:e.name,value:e.message,stacktrace:{frames:r??[]}}}function Ne(e){let r=we.exec(e),n=r?r.slice(1):[];if(n.length!==6)throw new Error("Invalid DSN");let a=n[5].split("/"),t=a.slice(0,-1).join("/");return n[0]+"://"+n[3]+(n[4]?":"+n[4]:"")+(t?"/"+t:"")+"/api/"+a.pop()+"/envelope/?sentry_version=7&sentry_key="+n[1]+(n[2]?"&sentry_secret="+n[2]:"")}function Ie(e,r,n){var a,t;let s=b({event_id:je().replaceAll("-",""),platform:"javascript",sdk:{name:"@hcaptcha/sentry",version:Ce},environment:r,release:n,timestamp:Date.now()/1e3},e.scope.toBody());if(e.type==="exception"){s.message=(t=(a=e.error)==null?void 0:a.message)!=null?t:"Unknown error",s.fingerprint=[s.message];let i=[],o=e.error;for(let l=0;l<5&&o&&(i.push(_e(o)),!(!o.cause||!(o.cause instanceof Error)));l++)o=o.cause;s.exception={values:i.reverse()}}return e.type==="message"&&(s.message=e.message,s.level=e.level),s}function Se(e){if(e instanceof Error)return e;if(typeof e=="string")return new Error(e);if(typeof e=="object"&&e!==null&&!Array.isArray(e)){let n=e,{message:a}=n,t=de(n,["message"]),s=new Error(typeof a=="string"?a:F);return Object.assign(s,t)}let r=new Error(F);return Object.assign(r,{cause:e})}function Ae(e,r,n){return I(this,null,function*(){var a,t;try{if(typeof fetch<"u"&&typeof AbortSignal<"u"){let s;if(n){let l=new AbortController;s=l.signal,setTimeout(()=>l.abort(),n)}let i=yield fetch(e,Y(b({},r),{signal:s})),o=yield i.text();return{status:i.status,body:o}}return yield new Promise((s,i)=>{var o,l;let c=new XMLHttpRequest;if(c.open((o=r?.method)!=null?o:"GET",e),c.onload=()=>s({status:c.status,body:c.responseText}),c.onerror=()=>i(new Error("XHR Network Error")),r?.headers)for(let[u,v]of Object.entries(r.headers))c.setRequestHeader(u,v);if(n){let u=setTimeout(()=>{c.abort(),i(new Error("Request timed out"))},n);c.onloadend=()=>{clearTimeout(u)}}c.send((l=r?.body)==null?void 0:l.toString())})}catch(s){return{status:0,body:(t=(a=s?.toString)==null?void 0:a.call(s))!=null?t:"Unknown error"}}})}var y,U=(y=class{constructor(e){m(this,"apiURL"),m(this,"dsn"),m(this,"environment"),m(this,"release"),m(this,"sampleRate"),m(this,"debug"),m(this,"_scope"),m(this,"shouldBuffer",!1),m(this,"bufferlimit",20),m(this,"buffer",[]);var r,n,a,t,s;this.environment=e.environment,this.release=e.release,this.sampleRate=(r=e.sampleRate)!=null?r:1,this.debug=(n=e.debug)!=null?n:!1,this._scope=(a=e.scope)!=null?a:new xe,this.apiURL=Ne(e.dsn),this.dsn=e.dsn,this.shouldBuffer=(t=e.buffer)!=null?t:!1,this.bufferlimit=(s=e.bufferLimit)!=null?s:20}static init(e){y._instance||(y._instance=new y(e))}static get instance(){if(!y._instance)throw new Error("Sentry has not been initialized");return y._instance}log(...e){this.debug&&console.log(...e)}get scope(){return this._scope}static get scope(){return y.instance.scope}withScope(e){let r=this._scope.child();e(r)}static withScope(e){y.instance.withScope(e)}captureException(e,r){this.captureEvent({type:"exception",level:"error",error:Se(e),scope:r??this._scope})}static captureException(e,r){y.instance.captureException(e,r)}captureMessage(e,r="info",n){this.captureEvent({type:"message",level:r,message:e,scope:n??this._scope})}static captureMessage(e,r="info",n){y.instance.captureMessage(e,r,n)}captureEvent(e){if(Math.random()>=this.sampleRate){this.log("Dropped event due to sample rate");return}if(this.shouldBuffer){if(this.buffer.length>=this.bufferlimit)return;this.buffer.push(e)}else this.sendEvent(e)}sendEvent(e,r=5e3){return I(this,null,function*(){try{this.log("Sending sentry event",e);let n=Ie(e,this.environment,this.release),a={event_id:n.event_id,dsn:this.dsn},t={type:"event"},s=JSON.stringify(a)+`
`+JSON.stringify(t)+`
`+JSON.stringify(n),i=yield Ae(this.apiURL,{method:"POST",headers:{"Content-Type":"application/x-sentry-envelope"},body:s},r);this.log("Sentry response",i.status),i.status!==200&&(console.log(i.body),console.error("Failed to send event to Sentry",i))}catch(n){console.error("Failed to send event",n)}})}flush(e=5e3){return I(this,null,function*(){try{this.log("Flushing sentry events",this.buffer.length);let r=this.buffer.splice(0,this.buffer.length).map(n=>this.sendEvent(n,e));yield Promise.all(r),this.log("Flushed all events")}catch(r){console.error("Failed to flush events",r)}})}static flush(e=5e3){return y.instance.flush(e)}static reset(){y._instance=void 0}},m(y,"_instance"),y),ke="https://d233059272824702afc8c43834c4912d@sentry.hcaptcha.com/6",Pe="2.0.1",$e="production";function Le(e=!0){if(!e)return W();U.init({dsn:ke,release:Pe,environment:$e});let r=U.scope;return fe(r),W(r)}function W(e=null){return{addBreadcrumb:r=>{e&&e.addBreadcrumb(r)},captureRequest:r=>{e&&e.setRequest(r)},captureException:r=>{e&&U.captureException(r,e)}}}function Me({scriptLocation:e,query:r,loadAsync:n=!0,crossOrigin:a="anonymous",apihost:t="https://js.hcaptcha.com",cleanup:s=!0,secureApi:i=!1,scriptSource:o=""}={},l){let c=Z(e),u=Q(c);return new Promise((v,g)=>{let p=u.document.createElement("script");p.id=ue,o?p.src=`${o}?onload=${L}`:i?p.src=`${t}/1/secure-api.js?onload=${L}`:p.src=`${t}/1/api.js?onload=${L}`,p.crossOrigin=a,p.async=n;let R=(E,S)=>{try{!i&&s&&c.removeChild(p),S(E)}catch(_){g(_)}};p.onload=E=>R(E,v),p.onerror=E=>{l&&l(p.src),R(E,g)},p.src+=r!==""?`&${r}`:"",c.appendChild(p)})}var $=[];function Te(e={cleanup:!0},r){try{r.addBreadcrumb({category:O,message:"hCaptcha loader params",data:e});let n=Z(e.scriptLocation),a=Q(n),t=$.find(({scope:i})=>i===a.window);if(t)return r.addBreadcrumb({category:O,message:"hCaptcha already loaded"}),t.promise;let s=new Promise((i,o)=>I(this,null,function*(){try{a.window[L]=()=>{r.addBreadcrumb({category:O,message:"hCaptcha script called onload function"}),i(a.window.hcaptcha)};let l=pe({custom:e.custom,render:e.render,sentry:e.sentry,assethost:e.assethost,imghost:e.imghost,reportapi:e.reportapi,endpoint:e.endpoint,host:e.host,recaptchacompat:e.recaptchacompat,hl:e.hl});yield Me(b({query:l},e),c=>{r.captureRequest({url:c,method:"GET"})}),r.addBreadcrumb({category:O,message:"hCaptcha loaded",data:t})}catch{r.addBreadcrumb({category:O,message:"hCaptcha failed to load"});let c=$.findIndex(u=>u.scope===a.window);c!==-1&&$.splice(c,1),o(new Error(z))}}));return $.push({promise:s,scope:a.window}),s}catch(n){return r.captureException(n),Promise.reject(new Error(z))}}function te(e,r,n=0){return I(this,null,function*(){let a=n<2?"Retry loading hCaptcha Api":"Exceeded maximum retries";try{return yield Te(e,r)}catch(t){return r.addBreadcrumb({category:O,message:a}),n>=2?(r.captureException(t),Promise.reject(t)):(n+=1,te(e,r,n))}})}function De(){return I(this,arguments,function*(e={}){let r=Le(e.sentry);return yield te(e,r)})}function K(e){var r=e&&e.ownerDocument||document,n=r.defaultView||r.parentWindow||window;return{document:r,window:n}}function G(e){return e||document.head}var qe=(function(e){oe(r,e);function r(a){var t;return t=e.call(this,a)||this,t._hcaptcha=void 0,t.renderCaptcha=t.renderCaptcha.bind(w(t)),t.resetCaptcha=t.resetCaptcha.bind(w(t)),t.removeCaptcha=t.removeCaptcha.bind(w(t)),t.isReady=t.isReady.bind(w(t)),t._onReady=null,t.loadCaptcha=t.loadCaptcha.bind(w(t)),t.handleOnLoad=t.handleOnLoad.bind(w(t)),t.handleSubmit=t.handleSubmit.bind(w(t)),t.handleExpire=t.handleExpire.bind(w(t)),t.handleError=t.handleError.bind(w(t)),t.handleOpen=t.handleOpen.bind(w(t)),t.handleClose=t.handleClose.bind(w(t)),t.handleChallengeExpired=t.handleChallengeExpired.bind(w(t)),t.ref=C.createRef(),t.apiScriptRequested=!1,t.sentryHub=null,t.captchaId="",t.state={isApiReady:!1,isRemoved:!1,elementId:a.id},t}var n=r.prototype;return n.componentDidMount=function(){var t=this,s=G(this.props.scriptLocation),i=K(s);this._hcaptcha=i.window.hcaptcha||void 0;var o=typeof this._hcaptcha<"u";if(o){this.setState({isApiReady:!0},function(){t.renderCaptcha()});return}this.loadCaptcha()},n.componentWillUnmount=function(){var t=this._hcaptcha,s=this.captchaId;this.isReady()&&(t.reset(s),t.remove(s))},n.shouldComponentUpdate=function(t,s){return!(this.state.isApiReady!==s.isApiReady||this.state.isRemoved!==s.isRemoved)},n.componentDidUpdate=function(t){var s=this,i=["sitekey","size","theme","tabindex","languageOverride","endpoint"],o=i.every(function(l){return t[l]===s.props[l]});o||this.removeCaptcha(function(){s.renderCaptcha()})},n.loadCaptcha=function(){if(!this.apiScriptRequested){var t=this.props,s=t.apihost,i=t.assethost,o=t.endpoint,l=t.host,c=t.imghost,u=t.languageOverride,v=t.reCaptchaCompat,g=t.reportapi,p=t.sentry,R=t.custom,E=t.loadAsync,S=t.scriptLocation,_=t.scriptSource,T=t.secureApi,A=t.cleanup,f=A===void 0?!0:A,h={render:"explicit",apihost:s,assethost:i,endpoint:o,hl:u,host:l,imghost:c,recaptchacompat:v===!1?"off":null,reportapi:g,sentry:p,custom:R,loadAsync:E,scriptLocation:S,scriptSource:_,secureApi:T,cleanup:f};De(h).then(this.handleOnLoad,this.handleError).catch(this.handleError),this.apiScriptRequested=!0}},n.renderCaptcha=function(t){var s=this,i=this.props.onReady,o=this.state.isApiReady,l=this.captchaId;if(!(!o||l)){var c=Object.assign({"open-callback":this.handleOpen,"close-callback":this.handleClose,"error-callback":this.handleError,"chalexpired-callback":this.handleChallengeExpired,"expired-callback":this.handleExpire,callback:this.handleSubmit},this.props,{hl:this.props.hl||this.props.languageOverride,languageOverride:void 0}),u=this._hcaptcha,v=u.render(this.ref.current,c);this.captchaId=v,this.setState({isRemoved:!1},function(){t&&t(),i&&i(),s._onReady&&s._onReady(v)})}},n.resetCaptcha=function(){var t=this._hcaptcha,s=this.captchaId;this.isReady()&&t.reset(s)},n.removeCaptcha=function(t){var s=this,i=this._hcaptcha,o=this.captchaId;this.isReady()&&this.setState({isRemoved:!0},function(){s.captchaId="",i.remove(o),t&&t()})},n.handleOnLoad=function(){var t=this;this.setState({isApiReady:!0},function(){var s=G(t.props.scriptLocation),i=K(s);t._hcaptcha=i.window.hcaptcha,t.renderCaptcha(function(){var o=t.props.onLoad;o&&o()})})},n.handleSubmit=function(t){var s=this.props.onVerify,i=this.state.isRemoved,o=this._hcaptcha,l=this.captchaId;if(!(typeof o>"u"||i)){var c=o.getResponse(l),u=o.getRespKey(l);s&&s(c,u)}},n.handleExpire=function(){var t=this.props.onExpire,s=this._hcaptcha,i=this.captchaId;this.isReady()&&(s.reset(i),t&&t())},n.handleError=function(t){var s=this.props.onError,i=this._hcaptcha,o=this.captchaId;this.isReady()&&i.reset(o),s&&s(t)},n.isReady=function(){var t=this.state,s=t.isApiReady,i=t.isRemoved;return s&&!i},n.handleOpen=function(){!this.isReady()||!this.props.onOpen||this.props.onOpen()},n.handleClose=function(){!this.isReady()||!this.props.onClose||this.props.onClose()},n.handleChallengeExpired=function(){!this.isReady()||!this.props.onChalExpired||this.props.onChalExpired()},n.execute=function(t){var s=this;t===void 0&&(t=null),t=typeof t=="object"?t:null;try{var i=this._hcaptcha,o=this.captchaId;if(!this.isReady()){var l,c=new Promise(function(u,v){s._onReady=function(g){try{var p=s._hcaptcha;t&&t.async?p.execute(g,t).then(u).catch(v):u(p.execute(g,t))}catch(R){v(R)}}});return(l=t)!=null&&l.async?c:null}return i.execute(o,t)}catch(u){return t&&t.async?Promise.reject(u):null}},n.close=function(){var t=this._hcaptcha,s=this.captchaId;if(this.isReady())return t.close(s)},n.setData=function(t){var s=this._hcaptcha,i=this.captchaId;this.isReady()&&(t&&typeof t!="object"&&(t=null),s.setData(i,t))},n.getResponse=function(){var t=this._hcaptcha;return t.getResponse(this.captchaId)},n.getRespKey=function(){var t=this._hcaptcha;return t.getRespKey(this.captchaId)},n.render=function(){var t=this.state.elementId;return C.createElement("div",{ref:this.ref,id:t})},r})(C.Component);const Be=C.forwardRef(({onVerify:e,onExpire:r,onError:n,siteKey:a,theme:t="light",size:s="normal",className:i=""},o)=>{const l=C.useRef(null),c=p=>{e(p)},u=()=>{r?.()},v=p=>{n?.(p)},g=()=>{l.current?.resetCaptcha()};return C.useImperativeHandle(o,()=>({resetCaptcha:g})),d.jsx("div",{className:`flex justify-center ${i}`,children:d.jsx(qe,{ref:l,sitekey:a,onVerify:c,onExpire:u,onError:v,theme:t,size:s})})});function Ue(){const[e,r]=C.useState({nationalId:"",phoneNumber:""}),[n,a]=C.useState({nationalId:"",phoneNumber:"",captcha:""}),[t,s]=C.useState(null),[i,o]=C.useState(!1),l=C.useRef(null),c=re(),u="14aee74e-f122-4974-b2f2-0d8cfbc08a86",v=f=>{const h=f.replace(/\D/g,"");if(h.length!==13)return"เลขบัตรประชาชนต้องมี 13 หลัก";let j=0;for(let N=0;N<12;N++)j+=parseInt(h[N])*(13-N);const k=(11-j%11)%10;return parseInt(h[12])!==k?"เลขบัตรประชาชนไม่ถูกต้อง":""},g=f=>{const h=f.replace(/\D/g,"");return h.length!==10?"เบอร์โทรศัพท์ต้องมี 10 หลัก":h.startsWith("0")?"":"เบอร์โทรศัพท์ต้องขึ้นต้นด้วย 0"},p=f=>{s(f),o(!0),a(h=>({...h,captcha:""}))},R=()=>{s(null),o(!1)},E=()=>{s(null),o(!1),a(f=>({...f,captcha:"เกิดข้อผิดพลาดในการยืนยันตัวตน"}))},S=f=>{f.preventDefault();const h=v(e.nationalId),j=g(e.phoneNumber),k=i?"":"กรุณายืนยันตัวตน";if(a({nationalId:h,phoneNumber:j,captcha:k}),h||j||k)return;const N=D.loading("กำลังเข้าสู่ระบบ...");setTimeout(()=>{D.dismiss(N),D.success("เข้าสู่ระบบสำเร็จ","ยินดีต้อนรับสู่ระบบจัดการค่างวดรถ"),c.navigate({to:"/"})},2e3)},_=(f,h)=>{r(j=>({...j,[f]:h})),n[f]&&a(j=>({...j,[f]:""}))},T=f=>{const h=f.replace(/\D/g,"");return h.length<=1?h:h.length<=5?`${h.slice(0,1)}-${h.slice(1)}`:h.length<=10?`${h.slice(0,1)}-${h.slice(1,5)}-${h.slice(5)}`:h.length<=12?`${h.slice(0,1)}-${h.slice(1,5)}-${h.slice(5,10)}-${h.slice(10)}`:`${h.slice(0,1)}-${h.slice(1,5)}-${h.slice(5,10)}-${h.slice(10,12)}-${h.slice(12,13)}`},A=f=>{const h=f.replace(/\D/g,"");return h.length<=3?h:h.length<=6?`${h.slice(0,3)}-${h.slice(3)}`:`${h.slice(0,3)}-${h.slice(3,6)}-${h.slice(6,10)}`};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"เข้าสู่ระบบ"}),d.jsx("p",{className:"text-gray-600",children:"ยินดีต้อนรับกลับสู่ระบบจัดการค่างวดรถ"})]}),d.jsxs("form",{onSubmit:S,className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-gray-700",children:"เลขบัตรประชาชน"}),d.jsxs("div",{className:"relative",children:[d.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),d.jsx(H,{type:"text",placeholder:"กรอกเลขบัตรประชาชน 13 หลัก",value:e.nationalId,onChange:f=>{const h=T(f.target.value);_("nationalId",h)},className:"pl-10",maxLength:17,required:!0})]}),n.nationalId&&d.jsx("p",{className:"text-sm text-red-600",children:n.nationalId})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-gray-700",children:"เบอร์โทรศัพท์"}),d.jsxs("div",{className:"relative",children:[d.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),d.jsx(H,{type:"tel",placeholder:"กรอกเบอร์โทรศัพท์ 10 หลัก",value:e.phoneNumber,onChange:f=>{const h=A(f.target.value);_("phoneNumber",h)},className:"pl-10",maxLength:12,required:!0})]}),n.phoneNumber&&d.jsx("p",{className:"text-sm text-red-600",children:n.phoneNumber})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(se,{className:"h-4 w-4 text-gray-500"}),d.jsx("label",{className:"text-sm font-medium text-gray-700",children:"ยืนยันตัวตน"})]}),d.jsx(Be,{ref:l,siteKey:u,onVerify:p,onExpire:R,onError:E,theme:"light",size:"normal",className:"py-2"}),n.captcha&&d.jsx("p",{className:"text-sm text-red-600",children:n.captcha})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-[#EC1B2E] focus:ring-[#EC1B2E]"}),d.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"จดจำฉัน"})]}),d.jsx("button",{type:"button",className:"text-sm text-[#EC1B2E] hover:underline",children:"ลืมรหัสผ่าน?"})]}),d.jsx(V,{type:"submit",className:"w-full bg-[#EC1B2E] text-white disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:!i,children:i?"เข้าสู่ระบบ":"กรุณายืนยันตัวตนก่อน"})]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-gray-300"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-2 bg-white text-gray-500",children:"หรือ"})})]}),d.jsx("div",{className:"space-y-3",children:d.jsxs(V,{variant:"outline",className:"w-full",children:[d.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"เข้าสู่ระบบด้วย Google"]})}),d.jsx("div",{className:"text-center",children:d.jsxs("p",{className:"text-gray-600",children:["ยังไม่มีบัญชี?"," ",d.jsx("button",{type:"button",onClick:()=>window.location.href="/sign-up",className:"text-[#EC1B2E] hover:underline font-medium",children:"สมัครสมาชิก"})]})})]})}const Je=()=>d.jsx(ie,{children:d.jsx(Ue,{})});export{Je as component};
