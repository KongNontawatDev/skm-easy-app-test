import{r as m,j as e,T as j,C as v}from"./index-DvfI50mZ.js";import{M as S}from"./mobile-input-jpi_8qGO.js";import{M,a as k,b as B}from"./bottom-navigation-7WT2ED68.js";import{M as E}from"./mobile-header-Do9qfRWs.js";import{M as x}from"./mobile-button-DZJkoi57.js";import{m as R}from"./mock-data-DPUcImiK.js";import{Q as r}from"./qr-code-Dp-kBiEB.js";import{S as u}from"./search-DzawyNbN.js";import{C as Q}from"./circle-x-C0tIkiuL.js";import"./credit-card-DfOMiA1p.js";import"./user-DQ_JBjmj.js";import"./toast-BrpPLZSF.js";function T(){const[i,h]=m.useState("qr"),[o,d]=m.useState(""),[s,c]=m.useState(null),[n,l]=m.useState(!1),g=()=>{l(!0),setTimeout(()=>{const t="COUPON-001-2024";d(t),p(t)},1500)},N=()=>{o.trim()&&p(o.trim())},p=t=>{l(!0);const a=R.find(C=>C.qrCode===t);setTimeout(()=>{a?a.status==="claimed"?c({type:"success",message:"คูปองถูกต้อง! สามารถใช้งานได้",coupon:a}):a.status==="used"?c({type:"warning",message:"คูปองนี้ถูกใช้ไปแล้ว",coupon:a}):a.status==="expired"?c({type:"error",message:"คูปองหมดอายุแล้ว",coupon:a}):c({type:"warning",message:"คูปองยังไม่ได้ถูกรับ",coupon:a}):c({type:"error",message:"ไม่พบคูปองที่สอดคล้องกับโค้ดนี้"}),l(!1)},1e3)},f=()=>{s?.coupon&&(l(!0),setTimeout(()=>{c({type:"success",message:"ใช้คูปองสำเร็จ!",coupon:s.coupon}),l(!1)},1e3))},y=()=>{d(""),c(null),l(!1)},b=t=>{switch(t){case"success":return e.jsx(v,{className:"w-8 h-8 text-green-600"});case"error":return e.jsx(Q,{className:"w-8 h-8 text-red-600"});case"warning":return e.jsx(j,{className:"w-8 h-8 text-yellow-600"});default:return e.jsx(r,{className:"w-8 h-8 text-gray-600"})}},w=t=>{switch(t){case"success":return"text-green-900";case"error":return"text-red-900";case"warning":return"text-yellow-900";default:return"text-gray-900"}};return e.jsxs(M,{children:[e.jsx(E,{title:"สแกนคูปองลูกค้า",showBackButton:!0}),e.jsx(k,{className:"pb-20",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"เลือกวิธีการสแกน"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>h("qr"),className:`p-3 rounded-xl text-center transition-colors ${i==="qr"?"bg-[#EC1B2E] text-white":"bg-gray-100 text-gray-700"}`,children:[e.jsx(r,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium",children:"สแกน QR"})]}),e.jsxs("button",{onClick:()=>h("manual"),className:`p-3 rounded-xl text-center transition-colors ${i==="manual"?"bg-[#EC1B2E] text-white":"bg-gray-100 text-gray-700"}`,children:[e.jsx(u,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium",children:"กรอกโค้ด"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 text-center",children:[i==="qr"&&!n&&!s&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-32 h-32 mx-auto bg-gray-100 rounded-2xl flex items-center justify-center",children:e.jsx(r,{className:"w-16 h-16 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"สแกน QR Code"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"ชี้กล้องไปที่ QR Code ของคูปองลูกค้า"}),e.jsxs(x,{onClick:g,className:"w-full",children:[e.jsx(r,{className:"w-4 h-4 mr-2"}),"เปิดกล้องสแกน"]})]})]}),i==="manual"&&!n&&!s&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-32 h-32 mx-auto bg-gray-100 rounded-2xl flex items-center justify-center",children:e.jsx(u,{className:"w-16 h-16 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"กรอกโค้ดคูปอง"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"กรอกโค้ดคูปองที่ลูกค้าแสดงให้ดู"}),e.jsx(S,{type:"text",placeholder:"กรอกโค้ดคูปอง",value:o,onChange:t=>d(t.target.value),className:"mb-4"}),e.jsxs(x,{onClick:N,className:"w-full",disabled:!o.trim(),children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"ตรวจสอบคูปอง"]})]})]}),n&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-32 h-32 mx-auto bg-gradient-to-br from-[#EC1B2E] to-[#C20010] rounded-2xl flex items-center justify-center animate-pulse",children:e.jsx(r,{className:"w-16 h-16 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"กำลังตรวจสอบ..."}),e.jsx("p",{className:"text-gray-600 text-sm",children:"กรุณารอสักครู่"})]})]}),s&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto rounded-full flex items-center justify-center",children:b(s.type)}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold mb-2 ${w(s.type)}`,children:s.message}),s.coupon&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-4 text-left",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"ข้อมูลคูปอง"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ชื่อคูปอง:"}),e.jsx("span",{className:"font-medium",children:s.coupon.title})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ส่วนลด:"}),e.jsx("span",{className:"font-medium",children:s.coupon.discountType==="percentage"?`${s.coupon.discountValue}%`:`${s.coupon.discountValue} บาท`})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"สถานะ:"}),e.jsx("span",{className:`font-medium ${s.coupon.status==="claimed"?"text-green-600":s.coupon.status==="used"?"text-gray-600":"text-red-600"}`,children:s.coupon.status==="claimed"?"พร้อมใช้":s.coupon.status==="used"?"ใช้แล้ว":"หมดอายุ"})]}),s.coupon.storeName&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ร้าน:"}),e.jsx("span",{className:"font-medium",children:s.coupon.storeName})]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[s.type==="success"&&s.coupon&&e.jsx(x,{onClick:f,className:"flex-1",disabled:n,children:n?"กำลังใช้...":"ใช้คูปอง"}),e.jsx(x,{variant:"outline",onClick:y,className:"flex-1",children:"สแกนใหม่"})]})]})]})]}),e.jsx("div",{className:"bg-blue-50 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(j,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-1",children:"คำแนะนำ"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"• ตรวจสอบให้แน่ใจว่าคูปองยังไม่หมดอายุ"}),e.jsx("li",{children:"• คูปองใช้ได้เพียงครั้งเดียว"}),e.jsx("li",{children:"• หากมีปัญหาให้ติดต่อฝ่ายสนับสนุน"})]})]})]})})]})}),e.jsx(B,{currentPath:"/coupon"})]})}const D=()=>e.jsx(T,{});export{D as component};
