import{c as f,j as e,m as j,a as x,o as b,p as u,q as h,X as N,u as v,r as C}from"./index-DvfI50mZ.js";import{M as w,a as k,b as I}from"./bottom-navigation-7WT2ED68.js";import{M as A}from"./mobile-header-Do9qfRWs.js";import"./mobile-input-jpi_8qGO.js";import{C as T}from"./calendar-DahnAGMd.js";import{E as P}from"./eye-BRFt_1DR.js";import{S as M}from"./search-DzawyNbN.js";import{M as m,u as E}from"./mock-api-DSyZqBbw.js";import{P as R}from"./plus-SrUStUvv.js";import{F as g}from"./file-text-BWl9YAgC.js";import"./credit-card-DfOMiA1p.js";import"./user-DQ_JBjmj.js";import"./mobile-button-DZJkoi57.js";import"./toast-BrpPLZSF.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Z=f("funnel",S);function D({status:t,type:a="status",size:s="md",className:r}){const n={sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-2 text-base"};return e.jsx("span",{className:x("inline-flex items-center rounded-full font-medium",b(t,a),n[s],r),children:j(t,a)})}function L({contract:t,onViewDetail:a}){return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 cursor-pointer transition-all duration-200",onClick:()=>a(t.id),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1",children:[t.vehicleInfo.brand," ",t.vehicleInfo.model]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["สัญญาเลขที่: ",t.contractNumber]})]}),e.jsx(D,{status:t.status,type:"status",size:"sm"})]}),e.jsxs("div",{className:"relative h-32 bg-gray-100 dark:bg-gray-700 rounded-xl mb-3 overflow-hidden",children:[(t.vehicleInfo.customImageUrl||t.vehicleInfo.imageUrl)&&e.jsx("img",{src:t.vehicleInfo.customImageUrl||t.vehicleInfo.imageUrl,alt:`${t.vehicleInfo.brand} ${t.vehicleInfo.model}`,className:"w-full h-full object-cover",loading:"lazy"}),e.jsx("div",{className:"absolute top-2 right-2 bg-black/50 text-white px-2 py-1 rounded text-xs",children:t.vehicleInfo.plateNumber})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"ค่างวดรายเดือน"}),e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[u(t.financialInfo.monthlyPayment)," ฿"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"ยอดคงเหลือ"}),e.jsxs("span",{className:"font-semibold text-[#EC1B2E]",children:[u(t.financialInfo.remainingAmount)," ฿"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"งวดถัดไป"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:h(t.paymentInfo.nextPaymentDate)})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-1",children:[e.jsx("span",{children:"ความคืบหน้า"}),e.jsxs("span",{className:"font-medium",children:[t.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:e.jsx("div",{className:"bg-[#EC1B2E] h-2 rounded-full transition-all duration-500",style:{width:`${t.progress}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(T,{className:"w-3 h-3 mr-1"}),e.jsxs("span",{children:["สร้างเมื่อ ",h(t.createdAt)]})]}),e.jsxs("div",{className:"flex items-center text-[#EC1B2E] text-sm font-medium",children:[e.jsx(P,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"ดูรายละเอียด"})]})]})]})}function $({value:t,onChange:a,placeholder:s="ค้นหา...",className:r,showClearButton:n=!0}){const o=()=>{a("")};return e.jsxs("div",{className:x("relative",r),children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:s,value:t,onChange:i=>a(i.target.value),className:"w-full pl-10 pr-10 py-3 rounded-xl focus:ring-2 focus:ring-[#EC1B2E] bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400"}),n&&t&&e.jsx("button",{onClick:o,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(N,{className:"w-4 h-4"})})]})}function p({icon:t,title:a,description:s,action:r,className:n}){return e.jsxs("div",{className:x("text-center py-10",n),children:[t&&e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center",children:t}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:a}),s&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:s}),r&&e.jsx("div",{children:r})]})}const y=[{id:"CTR-001",contractNumber:"CTR-2024-001",vehicleInfo:{brand:"Honda",model:"CBR150R",year:2023,color:"แดง",plateNumber:"กข-1234 กรุงเทพ",imageUrl:"https://s38.wheelsage.org/picture/h/honda/cbr1000rr_sp/honda_cbr1000rr_sp_8.jpeg"},customerInfo:{name:"สมชาย ใจดี",phone:"081-234-5678",email:"somchai@email.com",address:"123 ถนนสุขุมวิท แขวงคลองตัน เขตวัฒนา กรุงเทพฯ 10110"},financialInfo:{totalAmount:35e4,downPayment:5e4,monthlyPayment:8500,interestRate:3.5,termMonths:24,remainingAmount:18e4},paymentInfo:{nextPaymentDate:"2024-02-15T00:00:00Z",lastPaymentDate:"2024-01-15T00:00:00Z",paymentMethod:"บัญชีธนาคาร",bankAccount:"123-4-56789-0"},status:"active",createdAt:"2023-08-15T10:00:00Z",updatedAt:"2024-01-15T14:30:00Z",progress:48.6},{id:"CTR-002",contractNumber:"CTR-2024-002",vehicleInfo:{brand:"Honda",model:"PCX160",year:2022,color:"ดำ",plateNumber:"กข-5678 กรุงเทพ",imageUrl:"https://img.motofiixthailand.com/asset/files/17345971816726901.webp"},customerInfo:{name:"สมหญิง รักดี",phone:"082-345-6789",email:"somying@email.com",address:"456 ถนนพหลโยธิน แขวงลาดยาว เขตจตุจักร กรุงเทพฯ 10900"},financialInfo:{totalAmount:28e4,downPayment:4e4,monthlyPayment:6500,interestRate:3.2,termMonths:24,remainingAmount:12e4},paymentInfo:{nextPaymentDate:"2024-02-20T00:00:00Z",lastPaymentDate:"2024-01-20T00:00:00Z",paymentMethod:"บัตรเครดิต",bankAccount:"987-6-54321-0"},status:"active",createdAt:"2022-06-20T09:30:00Z",updatedAt:"2024-01-20T11:15:00Z",progress:57.1},{id:"CTR-003",contractNumber:"CTR-2023-015",vehicleInfo:{brand:"Honda",model:"Wave 125i",year:2021,color:"เงิน",plateNumber:"กข-9999 กรุงเทพ",imageUrl:"https://s359.kapook.com/rq/600/auto/10/pagebuilder/d00209a5-b85a-4592-8cd5-3955b2d799c2.jpg"},customerInfo:{name:"วิชัย เก่งมาก",phone:"083-456-7890",email:"wichai@email.com",address:"789 ถนนรัชดาภิเษก แขวงห้วยขวาง เขตห้วยขวาง กรุงเทพฯ 10310"},financialInfo:{totalAmount:18e4,downPayment:2e4,monthlyPayment:3500,interestRate:3,termMonths:36,remainingAmount:45e3},paymentInfo:{nextPaymentDate:"2024-02-10T00:00:00Z",lastPaymentDate:"2024-01-10T00:00:00Z",paymentMethod:"โอนเงิน",bankAccount:"456-7-89012-3"},status:"active",createdAt:"2021-12-10T14:00:00Z",updatedAt:"2024-01-10T16:45:00Z",progress:75}];class B{static async getContracts(a){let s=[...y];if(a?.search){const l=a.search.toLowerCase();s=s.filter(c=>c.contractNumber.toLowerCase().includes(l)||c.vehicleInfo.brand.toLowerCase().includes(l)||c.vehicleInfo.model.toLowerCase().includes(l)||c.vehicleInfo.plateNumber.toLowerCase().includes(l))}const r=a?.page||1,n=a?.limit||10,o=(r-1)*n,i=o+n,d=s.slice(o,i);return m.get("/contracts",a).then(l=>({...l,data:d,pagination:{page:r,pageSize:n,total:s.length,pageCount:Math.ceil(s.length/n)}}))}static async getContract(a){const s=y.find(r=>r.id===a);if(!s)throw new Error("Contract not found");return m.get(`/contracts/${a}`).then(r=>({...r,data:s}))}static async createContract(a){return m.post("/contracts",a)}static async updateContract(a,s){return m.put(`/contracts/${a}`,s)}static async deleteContract(a){return m.delete(`/contracts/${a}`)}static async uploadContractImage(a,s){const r=`https://example.com/images/contracts/${a}/${s.name}`;return m.post(`/contracts/${a}/image`,{url:r})}}function U(t){return E("contracts",t,()=>B.getContracts(t))}function _(){const t=v(),[a,s]=C.useState(""),{data:r,isLoading:n,error:o}=U({search:a,page:1,limit:20}),i=r?.data||[],d=l=>{t.navigate({to:"/contract/$id",params:{id:l}})};return e.jsxs(w,{children:[e.jsx(A,{title:"ข้อมูลสัญญา",showMoreMenu:!0}),e.jsx(k,{className:"pb-20",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx($,{value:a,onChange:s,placeholder:"ค้นหาสัญญา, ยี่ห้อ, รุ่น, หรือทะเบียน"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{className:"flex-1 flex items-center justify-center py-2 px-4 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"กรอง"]}),e.jsxs("button",{className:"flex-1 flex items-center justify-center py-2 px-4 bg-[#EC1B2E] text-white rounded-lg text-sm font-medium",children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"สัญญาใหม่"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["สัญญาของฉัน (",i.length,")"]})}),n?e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((l,c)=>e.jsxs("div",{className:"bg-white rounded-2xl p-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},c))}):o?e.jsx(p,{icon:e.jsx(g,{className:"w-8 h-8 text-red-400"}),title:"เกิดข้อผิดพลาด",description:"ไม่สามารถโหลดข้อมูลสัญญาได้"}):i.length>0?i.map(l=>e.jsx(L,{contract:l,onViewDetail:d},l.id)):e.jsx(p,{icon:e.jsx(g,{className:"w-8 h-8 text-gray-400"}),title:a?"ไม่พบสัญญาที่ค้นหา":"ยังไม่มีสัญญา",description:a?"ลองค้นหาด้วยคำอื่น":"เริ่มต้นการผ่อนชำระรถคันแรกของคุณ"})]})]})}),e.jsx(I,{currentPath:"/contract"})]})}const te=()=>e.jsx(_,{});export{te as component};
