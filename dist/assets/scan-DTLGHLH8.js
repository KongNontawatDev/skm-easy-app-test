import{r as c,j as e,e as x,C as N}from"./index-DvfI50mZ.js";import"./mobile-input-jpi_8qGO.js";import{M as b,a as f,b as y}from"./bottom-navigation-7WT2ED68.js";import{M as C}from"./mobile-header-Do9qfRWs.js";import{M as n}from"./mobile-button-DZJkoi57.js";import{b as d}from"./mock-data-DPUcImiK.js";import{Q as v}from"./qr-code-Dp-kBiEB.js";import{C as h}from"./camera-DYME2c1E.js";import{C as w}from"./circle-x-C0tIkiuL.js";import"./credit-card-DfOMiA1p.js";import"./user-DQ_JBjmj.js";import"./toast-BrpPLZSF.js";function S(){const[i,r]=c.useState(!1),[m,o]=c.useState(""),[s,a]=c.useState(null),j=()=>{r(!0),setTimeout(()=>{const t="STORE-001-QR";o(t);const l=d.find(g=>g.qrCode===t);a(l?{type:"success",message:`พบร้าน ${l.name} แล้ว!`,store:l}:{type:"error",message:"ไม่พบร้านค้าที่สอดคล้องกับ QR Code นี้"}),r(!1)},2e3)},p=()=>{s?.store&&a({type:"success",message:'รับคูปองสำเร็จ! ตรวจสอบในหน้า "คูปองของฉัน"',store:s.store})},u=()=>{o(""),a(null),r(!1)};return e.jsxs(b,{children:[e.jsx(C,{title:"สแกนรับคูปอง",showBackButton:!0}),e.jsx(f,{className:"pb-20",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(x,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-1",children:"วิธีใช้"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["1. เปิดกล้องและสแกน QR Code ที่ร้าน",e.jsx("br",{}),"2. รอระบบตรวจสอบร้านค้า",e.jsx("br",{}),"3. กดรับคูปองที่ร้านนั้น"]})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 text-center",children:[!i&&!m&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-32 h-32 mx-auto bg-gray-100 rounded-2xl flex items-center justify-center",children:e.jsx(v,{className:"w-16 h-16 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"สแกน QR Code"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"ชี้กล้องไปที่ QR Code ที่ร้านเพื่อรับคูปอง"}),e.jsxs(n,{onClick:j,className:"w-full",children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"เปิดกล้องสแกน"]})]})]}),i&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-32 h-32 mx-auto bg-gradient-to-br from-[#EC1B2E] to-[#C20010] rounded-2xl flex items-center justify-center animate-pulse",children:e.jsx(h,{className:"w-16 h-16 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"กำลังสแกน..."}),e.jsx("p",{className:"text-gray-600 text-sm",children:"กรุณาชี้กล้องไปที่ QR Code"})]})]}),m&&s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`w-16 h-16 mx-auto rounded-full flex items-center justify-center ${s.type==="success"?"bg-green-100":s.type==="error"?"bg-red-100":"bg-blue-100"}`,children:[s.type==="success"&&e.jsx(N,{className:"w-8 h-8 text-green-600"}),s.type==="error"&&e.jsx(w,{className:"w-8 h-8 text-red-600"}),s.type==="info"&&e.jsx(x,{className:"w-8 h-8 text-blue-600"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold mb-2 ${s.type==="success"?"text-green-900":s.type==="error"?"text-red-900":"text-blue-900"}`,children:s.message}),s.store&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"ข้อมูลร้าน"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("strong",{children:"ชื่อร้าน:"})," ",s.store.name]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("strong",{children:"ที่อยู่:"})," ",s.store.address]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"โทรศัพท์:"})," ",s.store.phone]})]}),e.jsxs("div",{className:"flex space-x-3",children:[s.type==="success"&&s.store&&e.jsx(n,{onClick:p,className:"flex-1",children:"รับคูปอง"}),e.jsx(n,{variant:"outline",onClick:u,className:"flex-1",children:"สแกนใหม่"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"ร้านที่เข้าร่วม"}),e.jsx("div",{className:"space-y-3",children:d.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600",children:t.address})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"QR Code"}),e.jsx("p",{className:"text-sm font-mono",children:t.qrCode})]})]},t.id))})]})]})}),e.jsx(y,{currentPath:"/coupon"})]})}const L=()=>e.jsx(S,{});export{L as component};
